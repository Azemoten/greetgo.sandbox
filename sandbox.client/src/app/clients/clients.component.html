<div class="container">
  <h3 class="text-center">Список клиентов</h3>

  <div class="d-flex justify-content-between my-2">
    <form class="form-search" (ngSubmit)="loadPage()">
      <div class="input-group">
        <input type="text" name="query" class="form-control" placeholder="Search" [(ngModel)]="filter.fio">
        <div class="input-group-btn">
          <button class="button-search btn btn-default" type="submit">
            <i class="fa fa-search"></i>
          </button>
        </div>
      </div>
    </form>

    <button class="btn btn-success" (click)="openModal(null)">
      <i class="fa fa-user-plus"></i>
    </button>
  </div>

  <table class="table table-bordered clients-table">
    <thead>
    <tr>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">ФИО</div>
          </div>
          <div class="d-flex flex-column my-auto">
            <div class="sort-arrow" (click)="sort('fio', 'ASC')"><i class="fas fa-sort-up"></i></div>
            <div class="sort-arrow" (click)="sort('fio', 'DESC')"><i class="fas fa-sort-down"></i></div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Характер</div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Возраст</div>
          </div>
          <div class="d-flex flex-column my-auto ml-3">
            <div class="sort-arrow" (click)="sort('age', 'ASC')"><i class="fas fa-sort-up"></i></div>
            <div class="sort-arrow" (click)="sort('age', 'DESC')"><i class="fas fa-sort-down"></i></div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Общий остаток счетов</div>
          </div>
          <div class="d-flex flex-column my-auto ml-3">
            <div class="sort-arrow" (click)="sort('balance', 'ASC')"><i class="fas fa-sort-up"></i></div>
            <div class="sort-arrow" (click)="sort('balance', 'DESC')"><i class="fas fa-sort-down"></i></div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Максимальный остаток</div>
          </div>
          <div class="d-flex flex-column my-auto ml-3">
            <div class="sort-arrow" (click)="sort('balanceMax', 'ASC')"><i class="fas fa-sort-up"></i></div>
            <div class="sort-arrow" (click)="sort('balanceMax', 'DESC')"><i class="fas fa-sort-down"></i></div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Минимальный остаток</div>
          </div>
          <div class="d-flex flex-column my-auto ml-3">
            <div class="sort-arrow" (click)="sort('balanceMin', 'ASC')"><i class="fas fa-sort-up"></i></div>
            <div class="sort-arrow" (click)="sort('balanceMin', 'DESC')"><i class="fas fa-sort-down"></i></div>
          </div>
        </div>
      </th>
      <th>
        <div class="w-100 h-100 d-flex justify-content-between m-0">
          <div class="d-flex flex-column my-auto">
            <div class="head-text">Комманды</div>
          </div>
        </div>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let r of list">
      <td class="cell">{{r.fio}}</td>
      <td class="cell">{{r.character}}</td>
      <td class="cell">{{r.age}}</td>
      <td class="cell">{{r.balance}}</td>
      <td class="cell">{{r.balanceMax}}</td>
      <td class="cell">{{r.balanceMin}}</td>
      <td>
        <button class="btn btn-warning btn-sm mr-1" (click)="openModal(r.id)" data-toggle="modal"
                data-target="#exampleModal">
          <i class="far fa-edit"></i>
        </button>
        <button class="btn btn-danger btn-sm" (click)="delete(r.id)">
          <i class="far fa-trash-alt"></i>
        </button>
      </td>
    </tr>
    </tbody>
  </table>

  <ngb-pagination [collectionSize]="count" [pageSize]=10 [(page)]="this.filter.page" [maxSize]="5" [rotate]="true"
                  [boundaryLinks]="true" (pageChange)="loadPage()"></ngb-pagination>

  <button class="btn btn-warning" (click)="openReport('pdf')">Report(pdf)</button>
  <button class="btn btn-success" (click)="openReport('xlsx')">Report(xlsx)</button>

  <app-client-info #modal *ngIf="this.modalOpen" [inModalData]="this.modalData"
                   (outModalData)="closeModal($event)"></app-client-info>
</div>
