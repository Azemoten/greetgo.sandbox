<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet author="ers" id="create-table-gender">
        <sql endDelimiter=";;"><![CDATA[
    create type gender as enum ('FEMALE','MALE')
    ]]></sql>
    </changeSet>

    <changeSet author="ers" id="create-table-clients">
        <sql endDelimiter=";;"><![CDATA[
     create table clients
        (
            id bigserial PRIMARY KEY NOT NULL,
            cia_id varchar(255),
            surname varchar(255) NOT NULL,
            name varchar(255) NOT NULL,
            patronymic varchar(255),
            gender gender,
            birth_date Timestamp,
            charm bigserial,
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

    <!--CHARM-->

    <changeSet author="ers" id="create-table-charms">
        <sql endDelimiter=";;"><![CDATA[
     create table charms
        (
            id bigserial PRIMARY KEY NOT NULL,
            name varchar(255) NOT NULL,
            description text,
            energy float,
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

    <!--CLIENT_ADDRESS-->

    <changeSet author="ers" id="create-table-addr-type">
        <sql endDelimiter=";;"><![CDATA[
     create type addr_type as enum ('FACT','REG')
    ]]></sql>
    </changeSet>

    <changeSet author="ers" id="create-table-client-addr">
        <sql endDelimiter=";;"><![CDATA[
     create table client_addr
        (
            id bigserial PRIMARY KEY NOT NULL,
            client bigserial,
            type addr_type NOT NULL,
            street varchar(255),
            house varchar(255),
            flat varchar(255),
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

    <!--CLIENT_PHONE-->

    <changeSet author="ers" id="create-table-phone-type">
        <sql endDelimiter=";;"><![CDATA[
     create type phone_type as enum ('HOME','WORK','MOBILE')
    ]]></sql>
    </changeSet>

    <changeSet author="ers" id="create-table-client-phone">
        <sql endDelimiter=";;"><![CDATA[
     create table client_phone
        (
            id bigserial PRIMARY KEY NOT NULL,
            client bigserial NOT NULL,
            number varchar(255) NOT NULL,
            type phone_type NOT NULL,
            actual boolean default false
        )
    ]]></sql>
    </changeSet>


    <!--CLIENT_ACCOUNT-->
    <changeSet author="ers" id="create-table-client-account">
        <sql endDelimiter=";;"><![CDATA[
     create table client_account
        (
            id bigserial PRIMARY KEY NOT NULL,
            client bigserial,
            money float,
            number varchar(255),
            registered_at timestamp,
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

    <changeSet author="ers" id="create-table-client-account-transaction">
        <sql endDelimiter=";;"><![CDATA[
     create table client_account_transaction
        (
            id bigserial PRIMARY KEY NOT NULL,
            account bigserial,
            money float,
            finished_at timestamp,
            type int,
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

    <changeSet author="ers" id="create-table-client-transaction-type">
        <sql endDelimiter=";;"><![CDATA[
     create table transaction_type
        (
            id bigserial PRIMARY KEY NOT NULL,
            code varchar(30),
            name varchar(255),
            actual boolean default false
        )
    ]]></sql>
    </changeSet>

</databaseChangeLog>